<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Azure on Office 365 blog</title>
    <link>http://o365blog.com/tags/azure/</link>
    <description>Recent content in Azure on Office 365 blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-gb</language>
    <lastBuildDate>Mon, 29 Aug 2022 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="http://o365blog.com/tags/azure/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Hunt for the gMSA secrets</title>
      <link>http://o365blog.com/post/gmsa/</link>
      <pubDate>Mon, 29 Aug 2022 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/gmsa/</guid>
      <description>&lt;p&gt;Group Managed Service Accounts (gMSA&amp;rsquo;s) can be used to run Windows services over multiple servers within the Windows domain.
&lt;br&gt;
&lt;br&gt;
Since the launch of Windows Server 2012 R2, gMSA has been the recommended service account option for AD FS.
As abusing AD FS is one of my favourite hobbies, I wanted to learn how gMSAs work.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Stealing and faking Azure AD device identities</title>
      <link>http://o365blog.com/post/deviceidentity/</link>
      <pubDate>Tue, 15 Feb 2022 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/deviceidentity/</guid>
      <description>&lt;p&gt;In my previous blog posts I&amp;rsquo;ve covered details on &lt;a href=&#34;http://o365blog.com/post/prt&#34; target=&#34;_blank&#34;&gt; PRTs&lt;/a&gt;, &lt;a href=&#34;http://o365blog.com/post/bprt&#34; target=&#34;_blank&#34;&gt;BPRTs&lt;/a&gt;, &lt;a href=&#34;http://o365blog.com/post/mdm&#34; target=&#34;_blank&#34;&gt;device compliance&lt;/a&gt;, and Azure AD &lt;a href=&#34;http://o365blog.com/post/devices&#34; target=&#34;_blank&#34;&gt;device join&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In this blog, I&amp;rsquo;ll show how to &lt;strong&gt;steal identities of existing Azure AD joined devices&lt;/strong&gt;, and how to &lt;strong&gt;fake identies&lt;/strong&gt; of non-AAD joined &lt;strong&gt;Windows devices&lt;/strong&gt; with &lt;a href=&#34;http://o365blog.com/aadinternals/&#34; target=&#34;_blank&#34;&gt;AADInternals&lt;/a&gt; &lt;strong&gt;v0.6.6&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Spoofing Azure AD sign-ins logs by imitating AD FS Hybrid Health Agent</title>
      <link>http://o365blog.com/post/hybridhealthagent/</link>
      <pubDate>Thu, 08 Jul 2021 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/hybridhealthagent/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Azure AD Connect Health&lt;/strong&gt; is a feature that allows viewing the health of on-prem hybrid infrastructure components, including Azure AD Connect and AD FS servers.
Health information is gathered by agents installed on each on-prem hybrid server. Since March 2021, also AD FS sign-in events are gathered and sent to Azure AD.&lt;/p&gt;

&lt;p&gt;In this write-up (based on a Threat Analysis &lt;a href=&#34;https://www.secureworks.com/research/azure-active-directory-sign-ins-log-tampering&#34; target=&#34;_blank&#34;&gt;report&lt;/a&gt; by Secureworks), I&amp;rsquo;ll explain how anyone with a local administrator access to AD FS server (or proxy), can create arbitrary sign-ins events to Azure AD sign-ins log.
Moreover, I&amp;rsquo;ll show how Global Administrators can register fake agents to Azure AD - even for tenants not using AD FS at all.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Exporting AD FS certificates revisited: Tactics, Techniques and Procedures</title>
      <link>http://o365blog.com/post/adfs/</link>
      <pubDate>Tue, 27 Apr 2021 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/adfs/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve talked about AD FS issues for a couple years now, and finally, after the Solorigate/Sunburst, the world is finally listening ðŸ˜‰&lt;/p&gt;

&lt;p&gt;In this blog, I&amp;rsquo;ll explain the currently known TTPs to exploit AD FS certificates, and introduce a totally new technique to export the configuration data remotely.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Deep-dive to Azure AD device join</title>
      <link>http://o365blog.com/post/devices/</link>
      <pubDate>Wed, 03 Mar 2021 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/devices/</guid>
      <description>&lt;p&gt;Devices (endpoints) are a crucial part of Microsoft&amp;rsquo;s Zero Trust concept. Devices can be Registered, Joined, or Hybrid Joined to Azure AD.
Conditional Access uses the device information as one of the decisions criteria to allow or block access to services.&lt;/p&gt;

&lt;p&gt;In this blog, I&amp;rsquo;ll explain what these different registration types are, what happens under-the-hood during the registration, and how to register devices with &lt;a href=&#34;http://o365blog.com/aadinternals/#hack-functions-azure-ad-join-mdm-prt&#34; target=&#34;_blank&#34;&gt;AADInternals&lt;/a&gt; &lt;strong&gt;v0.4.6&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>BPRT unleashed: Joining multiple devices to Azure AD and Intune</title>
      <link>http://o365blog.com/post/bprt/</link>
      <pubDate>Sun, 31 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/bprt/</guid>
      <description>&lt;p&gt;In October 2020, someone contacted me and asked whether it would be possible
to create BPRTs using AADInternals. I hadn&amp;rsquo;t even heard of BPRTs, but was eventually able to help him to create BPRTs. Now this
functionality is included in &lt;strong&gt;&lt;a href=&#34;http://o365blog.com/aadinternals/&#34; target=&#34;_blank&#34;&gt;AADInternals&lt;/a&gt; v0.4.5&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;In this blog, I&amp;rsquo;ll explain what BPRTs are and how they can be used to join multiple devices to both Azure AD and Intune.
I&amp;rsquo;ll also show the dark side of BPRTs: how they can be used to conduct DOS attacks against Azure AD, and how to detect and prevent this.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>AADInternals Cloud Identity Summit 2020 edition</title>
      <link>http://o365blog.com/post/cloudidentitysummit2020/</link>
      <pubDate>Mon, 19 Oct 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/cloudidentitysummit2020/</guid>
      <description>&lt;p&gt;The new AADInternals release v0.4.4 &lt;strong&gt;AADInternals Cloud Identity Summit 2020 edition&lt;/strong&gt; is now released! Read on to see the list of updates and new features.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Introducing a new phishing technique for compromising Office 365 accounts</title>
      <link>http://o365blog.com/post/phishing/</link>
      <pubDate>Tue, 13 Oct 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/phishing/</guid>
      <description>&lt;p&gt;The &lt;a href=&#34;https://threatpost.com/microsoft-seizes-domains-office-365-phishing-scam/157261&#34; target=&#34;_blank&#34;&gt;ongoing global phishing campaings&lt;/a&gt; againts Microsoft 365 have used various phishing techniques.
Currently attackers are utilising forged login sites and OAuth app consents.&lt;/p&gt;

&lt;p&gt;In this blog, I&amp;rsquo;ll introduce a new phishing technique based on Azure AD device code authentication flow.
I&amp;rsquo;ll also provide instructions on how to detect usage of compromised credentials and what to do to prevent phishing using the new technique.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Using Azure Cloud Shell from PowerShell</title>
      <link>http://o365blog.com/post/cloudshell/</link>
      <pubDate>Wed, 30 Sep 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/cloudshell/</guid>
      <description>&lt;p&gt;Azure Cloud Shell is a browser-based shell for managing Azure resources using your favourite shell, Bash or PowerShell.
Cloud Shell is typically used from Azure Portal. It provides an easy access to Azure CLI, Azure PowerShell and Azure AD PowerShell.&lt;/p&gt;

&lt;p&gt;In this blog, I&amp;rsquo;ll introduce a new way to access Cloud Shell from PowerShell (requires &lt;strong&gt;AADInternals v0.4.3&lt;/strong&gt; or newer).&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Bypassing conditional access by faking device compliance.</title>
      <link>http://o365blog.com/post/mdm/</link>
      <pubDate>Sun, 06 Sep 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/mdm/</guid>
      <description>&lt;p&gt;In my previous &lt;a href=&#34;http://o365blog.com/post/prt/#creating-your-own-prt&#34; target=&#34;_blank&#34;&gt;blog&lt;/a&gt; I demonstrated how to create
a Persistent Refresh Token (PRT) by joining imaginary device to Azure AD.&lt;/p&gt;

&lt;p&gt;In this blog, with &lt;strong&gt;AADInternals v0.4.2&lt;/strong&gt;, I&amp;rsquo;ll show how to make those devices compliant, allowing bypassing compliance related conditional access (CA) policies.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Journey to Azure AD PRT: Getting access with pass-the-token and pass-the-cert</title>
      <link>http://o365blog.com/post/prt/</link>
      <pubDate>Tue, 01 Sep 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/prt/</guid>
      <description>&lt;p&gt;Lately we have seen great articles by &lt;a href=&#34;https://twitter.com/_dirkjan&#34; target=&#34;_blank&#34;&gt;@_dirkjan&lt;/a&gt;,
&lt;a href=&#34;https://twitter.com/tifkin%5F&#34; target=&#34;_blank&#34;&gt;@tifkin_&lt;/a&gt;,
&lt;a href=&#34;https://twitter.com/rubin_mor&#34; target=&#34;_blank&#34;&gt;@rubin_mor&lt;/a&gt;,
 and &lt;a href=&#34;https://twitter.com/gentilkiwi&#34; target=&#34;_blank&#34;&gt;@gentilkiwi&lt;/a&gt;
about utilising Primary Refresh Token (PRT) to get access to Azure AD and Azure AD joined computers.&lt;/p&gt;

&lt;p&gt;In this blog, I&amp;rsquo;ll report my own findings regarding to PRT and introduce the new functionality added to &lt;strong&gt;AADInternals v0.4.1&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Deep-dive to Azure AD MFA: Creating a custom authenticator app</title>
      <link>http://o365blog.com/post/mfa/</link>
      <pubDate>Thu, 06 Aug 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/mfa/</guid>
      <description>&lt;p&gt;Multi-factor Authentication (MFA) is nowadays a recommended method for providing extra protection for users.
In most cases, it protects users from phishing attacks as the attackers can&amp;rsquo;t log in even they have user&amp;rsquo;s credentials.&lt;/p&gt;

&lt;p&gt;In this blog, I&amp;rsquo;ll report my findings on how the Azure AD MFA works under-the-hood, and how I built a &lt;a href=&#34;https://github.com/Gerenios/Authenticator&#34; target=&#34;_blank&#34;&gt;custom authenticator app for Android&lt;/a&gt;.
I also introduce some methods how the rogue administrator can bypass MFA when using user&amp;rsquo;s compromised credentials.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Unnoticed sidekick: Getting access to cloud as an on-prem admin</title>
      <link>http://o365blog.com/post/on-prem_admin/</link>
      <pubDate>Mon, 13 Jul 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/on-prem_admin/</guid>
      <description>&lt;p&gt;This post is part &lt;sup&gt;5&lt;/sup&gt;&amp;frasl;&lt;sub&gt;5&lt;/sub&gt; of &lt;a href=&#34;http://o365blog.com/aadkillchain/&#34; target=&#34;_blank&#34;&gt;Azure AD and Microsoft 365 kill chain&lt;/a&gt; blog series.&lt;/p&gt;

&lt;p&gt;Although on-prem administrators doesn&amp;rsquo;t usually have admin rights to Azure AD, they can have access to crucial information, such as Azure AD Connect, ADFS, and Active Directory.
Administrators of these services can easily get admin rights to Azure AD to manipulate and impersonate users.&lt;/p&gt;

&lt;p&gt;In this blog, using &lt;strong&gt;AADInternals v0.4.0&lt;/strong&gt;, I&amp;rsquo;ll show how to get Global Admin access and how to impersonate users as an on-prem administrator.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Keys of the kingdom: Playing God as Global Admin</title>
      <link>http://o365blog.com/post/admin/</link>
      <pubDate>Tue, 16 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/admin/</guid>
      <description>&lt;p&gt;This post is part &lt;sup&gt;4&lt;/sup&gt;&amp;frasl;&lt;sub&gt;5&lt;/sub&gt; of &lt;a href=&#34;http://o365blog.com/aadkillchain/&#34; target=&#34;_blank&#34;&gt;Azure AD and Microsoft 365 kill chain&lt;/a&gt; blog series.&lt;/p&gt;

&lt;p&gt;Global Admin role is the most powerfull administrator role in Azure AD. It is (almost) equivalent to the local system rigths in traditional Windows environment: &lt;strong&gt;If you are a Global Admin, there is no security!&lt;/strong&gt;
As a Global Admin, there are no limits what you are allowed to do. For instance, one can easily access others&amp;rsquo; data. But why bother, if you can as easily impersonate users?&lt;/p&gt;

&lt;p&gt;In this blog, using &lt;strong&gt;AADInternals v0.4.0&lt;/strong&gt;, I&amp;rsquo;ll show how (as an Global Administrator) to gather information of Azure subscriptions, gather users&amp;rsquo; credentials, get system level access to Azure VMs, and how to impersonate users.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Wolf in sheep&#39;s clothing: Azure Active Directory reconnaissance as an insider</title>
      <link>http://o365blog.com/post/insider/</link>
      <pubDate>Mon, 15 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/insider/</guid>
      <description>&lt;p&gt;This post is part &lt;sup&gt;3&lt;/sup&gt;&amp;frasl;&lt;sub&gt;5&lt;/sub&gt; of &lt;a href=&#34;http://o365blog.com/aadkillchain/&#34; target=&#34;_blank&#34;&gt;Azure AD and Microsoft 365 kill chain&lt;/a&gt; blog series.&lt;/p&gt;

&lt;p&gt;Azure AD and Office 365 are cloud services and most information is hidden to the members (or guests) of the tenant.
However, there are plenty of information publicly available to anyone.&lt;/p&gt;

&lt;p&gt;In this blog, using &lt;strong&gt;AADInternals v0.4.5&lt;/strong&gt;, I&amp;rsquo;ll show how to gather information of any Azure AD tenant as an insider.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>AAD &amp; M365 kill chain</title>
      <link>http://o365blog.com/aadkillchain/</link>
      <pubDate>Sun, 14 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/aadkillchain/</guid>
      <description>imageMapResize();  Introduction According to Verizon&amp;rsquo;s Data Breach Investigations Report 2020, externals attackers are considerable more common than internal attackers. In the cloud era, attacking the organisation from the outside is much more difficult, if not impossible. Therefore, to be able to access organisation&amp;rsquo;s data, one must gain some level of legitimate access to the organisation.
The Azure AD and Microsoft 365 kill chain is a collection of recon techniques and hacking tools I&amp;rsquo;ve discovered and built during the last 10+ years while working with Microsoft cloud services.</description>
    </item>
    
    <item>
      <title>Quest for guest access: Azure Active Directory reconnaissance as a guest</title>
      <link>http://o365blog.com/post/quest_for_guest/</link>
      <pubDate>Sun, 14 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/quest_for_guest/</guid>
      <description>&lt;p&gt;This post is part &lt;sup&gt;2&lt;/sup&gt;&amp;frasl;&lt;sub&gt;5&lt;/sub&gt; of &lt;a href=&#34;http://o365blog.com/aadkillchain/&#34; target=&#34;_blank&#34;&gt;Azure AD and Microsoft 365 kill chain&lt;/a&gt; blog series.&lt;/p&gt;

&lt;p&gt;When sharing SharePoint to people outside the organisations or inviting them to Teams, a corresponding guest account is created to Azure AD.
Although the created guest account is not a pure insider, it has wide read-only access to organisation&amp;rsquo;s Azure AD information.&lt;/p&gt;

&lt;p&gt;In this blog, using &lt;strong&gt;AADInternals v0.4.0&lt;/strong&gt;, I&amp;rsquo;ll show how to gather information from Azure AD tenant as a guest user.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Just looking: Azure Active Directory reconnaissance as an outsider</title>
      <link>http://o365blog.com/post/just-looking/</link>
      <pubDate>Sat, 13 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/just-looking/</guid>
      <description>&lt;p&gt;This post is part &lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;5&lt;/sub&gt; of &lt;a href=&#34;http://o365blog.com/aadkillchain/&#34; target=&#34;_blank&#34;&gt;Azure AD and Microsoft 365 kill chain&lt;/a&gt; blog series.&lt;/p&gt;

&lt;p&gt;Azure AD and Office 365 are cloud services and most information is available only to the members (or guests) of the tenant.
However, there are plenty of information publicly available to anyone.&lt;/p&gt;

&lt;p&gt;In this blog, using &lt;strong&gt;AADInternals v0.4.0&lt;/strong&gt;, I&amp;rsquo;ll show how to gather information of any Azure AD tenant as an outsider.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Getting root access to Azure VMs as a Azure AD Global Administrator</title>
      <link>http://o365blog.com/post/azurevms/</link>
      <pubDate>Thu, 04 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/azurevms/</guid>
      <description>&lt;p&gt;Sean Metcalf (&lt;a href=&#34;https://twitter.com/PyroTek3&#34; target=&#34;_blank&#34;&gt;@Pyrotek3&lt;/a&gt;) organised a great &lt;a href=&#34;https://www.trimarcsecurity.com/event-details/securing-office-365-azure-active-directory-defend-your-tenant&#34; target=&#34;_blank&#34;&gt;webcast&lt;/a&gt; at the end of the May 2020.
Among other things, Sean introduced a new (to me, at least) attack-vector where an Azure AD administrator can easily get a system level access to any Azure virtual machine of the organisation.
Naturally, I had to implement this functionality to &lt;a href=&#34;http://o365blog.com/aadinternals target=&#34;_blank&#34;&gt;AADInternals&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In this blog, using &lt;strong&gt;AADInternals v0.3.3&lt;/strong&gt;, I&amp;rsquo;ll show how a Global Administator can gain access to any Azure VM of the organisation.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Partner Center PowerShell module sends telemetry data to Microsoft</title>
      <link>http://o365blog.com/post/partnercenter/</link>
      <pubDate>Sun, 19 Jan 2020 00:00:00 +0000</pubDate>
      
      <guid>http://o365blog.com/post/partnercenter/</guid>
      <description>&lt;p&gt;Microsoft has published a PowerShell module for their partners to ease and automate operations with their customers.
This module is (quite intuitively) called &lt;a href=&#34;https://docs.microsoft.com/en-us/powershell/partnercenter/overview&#34; target=&#34;_blank&#34;&gt;Partner Center&lt;/a&gt;.
While the module does well what it&amp;rsquo;s meant to do, it also tells Microsoft what the partners are doing.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>